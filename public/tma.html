<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LiveMatch</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        (function () {
            var s = document.createElement('script');
            s.src = 'https://libtl.com/sdk.js';
            s.setAttribute('data-zone', '10621765');
            s.setAttribute('data-sdk', 'show_10621765');
            document.head.appendChild(s);
        })();
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0e14;
            --card: #151c25;
            --txt: #f1f5f9;
            --muted: #64748b;
            --accent: #3b82f6;
            --red: #ef4444
        }

        [data-theme="light"] {
            --bg: #f8fafc;
            --card: #fff;
            --txt: #0f172a
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--bg);
            color: var(--txt);
            min-height: 100vh
        }

        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: var(--bg);
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05)
        }

        .brand {
            font-weight: 800;
            font-size: 1.2rem
        }

        .brand span {
            color: var(--accent)
        }

        .acts {
            display: flex;
            gap: 8px
        }

        .btn {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            border: none;
            background: var(--card);
            color: var(--txt);
            font-size: 1rem;
            cursor: pointer
        }

        .ad {
            padding: 10px;
            background: var(--card);
            text-align: center
        }

        .filt {
            display: flex;
            gap: 8px;
            padding: 10px 16px;
            overflow-x: auto
        }

        .chip {
            padding: 8px 16px;
            border-radius: 20px;
            background: var(--card);
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
            cursor: pointer;
            color: var(--muted)
        }

        .chip.active {
            background: var(--accent);
            color: #fff
        }

        .lst {
            padding: 10px 16px 80px
        }

        .ttl {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--muted);
            margin: 12px 0 8px
        }

        .badge {
            background: rgba(239, 68, 68, 0.15);
            color: var(--red);
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            gap: 5px
        }

        .dot {
            width: 6px;
            height: 6px;
            background: var(--red);
            border-radius: 50%;
            animation: p 1.2s infinite
        }

        @keyframes p {

            0%,
            100% {
                opacity: 1
            }

            50% {
                opacity: 0.4
            }
        }

        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            border-left: 3px solid transparent;
            transition: transform .15s
        }

        .card:active {
            transform: scale(0.98)
        }

        .card.live {
            border-left-color: var(--red)
        }

        .card-h {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px
        }

        .league {
            font-size: 0.65rem;
            color: var(--muted)
        }

        .time {
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--accent);
            padding: 2px 8px;
            border-radius: 8px
        }

        .time.live {
            background: rgba(239, 68, 68, 0.15);
            color: var(--red)
        }

        .teams {
            display: flex;
            align-items: center;
            justify-content: space-between
        }

        .team {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1
        }

        .teamR {
            justify-content: flex-end
        }

        .logo {
            width: 32px;
            height: 32px;
            object-fit: contain
        }

        .name {
            font-size: 0.8rem;
            font-weight: 700
        }

        .vs {
            font-size: 0.75rem;
            font-weight: 900;
            color: var(--muted);
            opacity: 0.4;
            padding: 0 10px
        }

        .ftr {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            padding-top: 8px;
            border-top: 1px solid rgba(255, 255, 255, 0.05)
        }

        .info {
            font-size: 0.7rem;
            color: var(--muted)
        }

        .play {
            background: var(--accent);
            color: #fff;
            border: none;
            padding: 6px 14px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 700
        }

        .infeed {
            margin: 16px 0;
            text-align: center;
            background: var(--card);
            padding: 10px;
            border-radius: 12px
        }

        .empty {
            text-align: center;
            padding: 40px;
            color: var(--muted)
        }

        #loader {
            position: fixed;
            inset: 0;
            background: var(--bg);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999
        }

        #loader.hidden {
            display: none
        }

        @media(min-width:500px) {
            .lst {
                max-width: 450px;
                margin: 0 auto
            }
        }
    </style>
</head>

<body>
    <div id="loader">
        <div style="font-size:2rem">‚öΩ</div>
    </div>
    <header class="header">
        <div class="brand">‚öΩ Live<span>Match</span></div>
        <div class="acts">
            <button class="btn" id="themeBtn">üåì</button>
            <button class="btn" id="refreshBtn">üîÑ</button>
        </div>
    </header>
    <div class="ad">
        <script>var atOptions = { 'key': '167755cfce2e606f5c26037ed81a359a', 'format': 'iframe', 'height': 50, 'width': 320, 'params': {} };</script>
        <script src="https://www.highperformanceformat.com/167755cfce2e606f5c26037ed81a359a/invoke.js"></script>
    </div>
    <div class="filt" id="filters"></div>
    <div class="lst" id="lst"></div>
    <script>
        var CFG = { URL: 'data/matches.json', Z: '10621765', TK: 'livematch_theme' };
        var st = { m: [], f: [], l: 'all' };
        var fallbackLogo = 'https://cdn-icons-png.flaticon.com/512/9312/9312098.png';

        document.addEventListener('DOMContentLoaded', init);
        function init() {
            var t = Telegram.WebApp; t.ready(); t.expand(); t.enableClosingConfirmation();
            document.getElementById('themeBtn').onclick = toggleTheme;
            document.getElementById('refreshBtn').onclick = refreshData;
            loadTheme(); fetchM(); setupF(); document.getElementById('loader').classList.add('hidden')
        }
        function fetchM() { fetch(CFG.URL + '?t=' + Date.now()).then(function (r) { return r.json() }).then(function (d) { st.m = d.m || []; applyF(); renderM() }).catch(function (e) { console.log(e) }) }
        function refreshData() { Telegram.WebApp.HapticFeedback.impactOccurred('light'); fetchM() }
        function applyF() { var m = st.m.slice(); if (st.l !== 'all') { m = m.filter(function (x) { return x.league.name.indexOf(st.l) !== -1 || x.league.country === st.l }) } m.sort(function (a, b) { var o = { 'LIVE': 0, 'NS': 1 }; return (o[a.status] || 1) - (o[b.status] || 1) }); st.f = m }
        function setupF() { var f = ['all', 'ÿ£ŸÅÿ±ŸäŸÇŸäÿß', 'ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©', 'ŸÖÿµÿ±', 'ÿ•ŸÜÿ¨ŸÑÿ™ÿ±ÿß', 'ÿ•ÿ≥ÿ®ÿßŸÜŸäÿß', 'ÿ•Ÿäÿ∑ÿßŸÑŸäÿß', 'ŸÅÿ±ŸÜÿ≥ÿß', 'ÿ£ŸÑŸÖÿßŸÜŸäÿß']; var h = ''; f.forEach(function (x) { h += '<div class="chip' + (x === st.l ? ' active' : '') + '" data-l="' + x + '">' + (x === 'all' ? 'ŸÉŸÑ ÿßŸÑÿ®ÿ∑ŸàŸÑÿßÿ™' : x) + '</div>' }); document.getElementById('filters').innerHTML = h; document.querySelectorAll('.chip').forEach(function (c) { c.onclick = function () { document.querySelectorAll('.chip').forEach(function (x) { x.classList.remove('active') }); c.classList.add('active'); st.l = c.dataset.l; applyF(); renderM(); Telegram.WebApp.HapticFeedback.selectionChanged() } }) }
        function renderM() { var c = document.getElementById('lst'); var m = st.f || []; if (!m.length) { c.innerHTML = '<div class=empty>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ®ÿßÿ±Ÿäÿßÿ™</div>'; return } var h = ''; var i = 0; var live = m.filter(function (x) { return x.status === 'LIVE' }); var up = m.filter(function (x) { return x.status === 'NS' }); if (live.length) { h += '<div class=ttl><span class=badge><span class=dot></span>ŸÖÿ®ÿßÿ¥ÿ±</span></div>'; live.forEach(function (x) { h += card(x, true, i); i++ }) } if (up.length) { if (live.length) h += '<div class=ttl>ÿßŸÑŸÇÿßÿØŸÖÿ©</div>'; up.forEach(function (x) { h += card(x, false, i); i++ }) } c.innerHTML = h }
        function card(m, isLive, idx) { var ad = ''; if (idx === 2 && st.f.length > 3) { ad = '<div class=infeed><div id="infeedAd"></div></div>'; setTimeout(function () { var d = document.getElementById('infeedAd'); if (d) { d.innerHTML = '<script>var ao={key:\"2895cfc4a233371917690acdf46458f6\",format:\"iframe\",height:250,width:300,params:{}};</script>
    <script src=\"https://www.highperformanceformat.com/2895cfc4a233371917690acdf46458f6/invoke.js\"></script>
    '}},100)}var tl=isLive?'ŸÖÿ®ÿßÿ¥ÿ±':fmt(m.time);return ad+'<div class="card '+(isLive?'live':'')+'" data-id="'+m.id+'">
        <div class=card-h><span class=league>'+m.league.name+'</span><span
                class="time '+(isLive?'live':'')+'">'+tl+'</span></div>
        <div class=teams>
            <div class=team><img class=logo src="'+m.home.logo+'" onerror="this.src=\''+fallbackLogo+'\'"><span
                    class=name>'+m.home.name+'</span></div><span class=vs>VS</span>
            <div class="team teamR"><span class=name>'+m.away.name+'</span><img class=logo src="'+m.away.logo+'"
                    onerror="this.src=\''+fallbackLogo+'\'"></div>
        </div>
        <div class=ftr><span class=info>'+(m.streams?m.streams.length:0)+' ÿ≥Ÿäÿ±ŸÅÿ±</span><button class=play
                data-id="'+m.id+'">‚ñ∂</button></div>
    </div>'}
    function go(id){var m=st.m.find(function(x){return
    x.id===id});if(!m)return;Telegram.WebApp.HapticFeedback.impactOccurred('medium');showInt(function(){sessionStorage.setItem('selectedMatch',JSON.stringify(m));window.location.href='select-server.html'})}
    function showInt(cb){var fn=window['show_'+CFG.Z];if(typeof
    fn==='function'){fn({type:'preload'}).then(function(){return
    fn()}).catch(function(){}).then(cb).catch(cb)}else{cb()}}
    function loadTheme(){var s=localStorage.getItem(CFG.TK);if(s)document.documentElement.setAttribute('data-theme',s)}
    function toggleTheme(){var d=document.documentElement;var
    n=d.getAttribute('data-theme')==='dark'?'light':'dark';d.setAttribute('data-theme',n);localStorage.setItem(CFG.TK,n);Telegram.WebApp.HapticFeedback.impactOccurred('light')}
    function fmt(t){if(!t)return'';var m=t.match(/(\\d+):(\\d+)/);return m?m[1]+':'+m[2]+' GMT':t}
    document.addEventListener('click',function(e){var
    c=e.target;if(c.classList.contains('card')||c.closest('.card')){var
    id=c.closest('.card').dataset.id;if(id)go(parseInt(id))}if(c.classList.contains('play')){var
    id=c.dataset.id;if(id)go(parseInt(id))}});
    </script>
</body>

</html>