<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LiveMatch</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0e14;
            --card: #151c25;
            --txt: #f1f5f9;
            --muted: #64748b;
            --accent: #3b82f6;
            --red: #ef4444
        }

        [data-theme="light"] {
            --bg: #f8fafc;
            --card: #fff;
            --txt: #0f172a
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--bg);
            color: var(--txt);
            min-height: 100vh
        }

        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: var(--bg);
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center
        }

        .brand {
            font-weight: 800;
            font-size: 1.2rem
        }

        .brand span {
            color: var(--accent)
        }

        .acts {
            display: flex;
            gap: 8px
        }

        .btn {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            border: none;
            background: var(--card);
            color: var(--txt);
            font-size: 1rem;
            cursor: pointer
        }

        .ad {
            padding: 8px;
            background: var(--card);
            text-align: center;
            min-height: 50px
        }

        .filt {
            display: flex;
            gap: 6px;
            padding: 8px 16px;
            overflow-x: auto
        }

        .chip {
            padding: 6px 12px;
            border-radius: 15px;
            background: var(--card);
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
            cursor: pointer;
            color: var(--muted)
        }

        .chip.active {
            background: var(--accent);
            color: #fff
        }

        .lst {
            padding: 8px 16px 80px
        }

        .ttl {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--muted);
            margin: 10px 0 6px
        }

        .card {
            background: var(--card);
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 6px;
            cursor: pointer;
            border-left: 3px solid transparent
        }

        .card.live {
            border-left-color: var(--red)
        }

        .ch {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px
        }

        .lg {
            font-size: 0.6rem;
            color: var(--muted)
        }

        .tm {
            font-size: 0.65rem;
            font-weight: 700;
            color: var(--accent);
            padding: 2px 6px;
            border-radius: 6px
        }

        .tm.live {
            background: rgba(239, 68, 68, 0.15);
            color: var(--red)
        }

        .tmz {
            display: flex;
            align-items: center;
            justify-content: space-between
        }

        .tm {
            display: flex;
            align-items: center;
            gap: 6px;
            flex: 1
        }

        .tn {
            font-size: 0.75rem;
            font-weight: 700
        }

        .vs {
            font-size: 0.7rem;
            font-weight: 900;
            color: var(--muted);
            opacity: 0.4;
            padding: 0 8px
        }

        .ft {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            padding-top: 6px;
            border-top: 1px solid rgba(255, 255, 255, 0.05)
        }

        .inf {
            font-size: 0.65rem;
            color: var(--muted)
        }

        .ply {
            background: var(--accent);
            color: #fff;
            border: none;
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 700
        }

        .emp {
            text-align: center;
            padding: 40px;
            color: var(--muted)
        }

        #ld {
            position: fixed;
            inset: 0;
            background: var(--bg);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999
        }

        #ld.hd {
            display: none
        }
    </style>
</head>

<body>
    <div id="ld">
        <div style="font-size:2rem">‚öΩ</div>
    </div>
    <header class="header">
        <div class="brand">‚öΩ Live<span>Match</span></div>
        <div class="acts">
            <button class="btn" onclick="th()">üåì</button>
            <button class="btn" onclick="rf()">üîÑ</button>
        </div>
    </header>
    <div class="ad">
        <script>var atOptions = { 'key': '167755cfce2e606f5c26037ed81a359a', 'format': 'iframe', 'height': 50, 'width': 320, 'params': {} };</script>
        <script src="https://www.highperformanceformat.com/167755cfce2e606f5c26037ed81a359a/invoke.js"></script>
    </div>
    <div class="filt" id="flt"></div>
    <div class="lst" id="lst"></div>
    <script>
        var CFG = { URL: 'data/matches.json', Z: '10621765', TK: 'livematch_theme' };
        var st = { m: [], f: [], l: 'all' };
        document.addEventListener('DOMContentLoaded', init);
        function init() { var t = Telegram.WebApp; t.ready(); t.expand(); lt(); fc(); gm(); document.getElementById('ld').classList.add('hd') }
        function gm() { fetch(CFG.URL + '?t=' + Date.now()).then(function (r) { return r.json() }).then(function (d) { st.m = d.matches || []; sf(); rp() }).catch(function (e) { console.log(e) }) }
        function rf() { Telegram.WebApp.HapticFeedback.impactOccurred('light'); gm() }
        function sf() { var m = st.m.slice(); if (st.l !== 'all') { m = m.filter(function (x) { return x.league.name.indexOf(st.l) !== -1 || x.league.country === st.l }) } m.sort(function (a, b) { var o = { 'LIVE': 0, 'NS': 1 }; return (o[a.status] || 1) - (o[b.status] || 1) }); st.f = m }
        function fc() { var f = ['all', 'ÿ£ŸÅÿ±ŸäŸÇŸäÿß', 'ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©', 'ŸÖÿµÿ±', 'ÿ•ŸÜÿ¨ŸÑÿ™ÿ±ÿß', 'ÿ•ÿ≥ÿ®ÿßŸÜŸäÿß', 'ÿ•Ÿäÿ∑ÿßŸÑŸäÿß']; var h = ''; f.forEach(function (x) { h += '<div class="chip' + (x === st.l ? ' active' : '') + '" data-l="' + x + '">' + (x === 'all' ? 'ŸÉŸÑ ÿßŸÑÿ®ÿ∑ŸàŸÑÿßÿ™' : x) + '</div>' }); document.getElementById('flt').innerHTML = h; document.querySelectorAll('.chip').forEach(function (c) { c.onclick = function () { document.querySelectorAll('.chip').forEach(function (x) { x.classList.remove('active') }); c.classList.add('active'); st.l = c.dataset.l; sf(); rp(); Telegram.WebApp.HapticFeedback.selectionChanged() } }) }
        function rp() { var c = document.getElementById('lst'); var m = st.f || []; if (!m.length) { c.innerHTML = '<div class=emp>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ®ÿßÿ±Ÿäÿßÿ™</div>'; return } var h = ''; var lv = m.filter(function (x) { return x.status === 'LIVE' }); var up = m.filter(function (x) { return x.status === 'NS' }); if (lv.length) { h += '<div class=ttl>ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ŸÖÿ®ÿßÿ¥ÿ±ÿ©</div>'; lv.forEach(function (x) { h += cd(x, true) }) } if (up.length) { if (lv.length) h += '<div class=ttl>ÿßŸÑŸÇÿßÿØŸÖÿ©</div>'; up.forEach(function (x) { h += cd(x, false) }) } c.innerHTML = h }
        function cd(m, isLive) { var tl = isLive ? 'ŸÖÿ®ÿßÿ¥ÿ±' : ft(m.time); return '<div class="card ' + (isLive ? 'live' : '') + '" data-id="' + m.id + '"><div class=ch><span class=lg>' + m.league.name + '</span><span class="tm ' + (isLive ? 'live' : '') + '">' + tl + '</span></div><div class=tmz><div class=tm><img src="' + m.home.logo + '" style="width:24px;height:24px;margin-right:6px;border-radius:50%"><span class=tn>' + m.home.name + '</span></div><span class=vs>VS</span><div class=tm style=justify-content:flex-end><span class=tn>' + m.away.name + '</span><img src="' + m.away.logo + '" style="width:24px;height:24px;margin-left:6px;border-radius:50%"></div></div><div class=ft><span class=inf>' + (m.streams ? m.streams.length : 0) + ' ÿ≥Ÿäÿ±ŸÅÿ±</span><button class=ply data-id="' + m.id + '">‚ñ∂</button></div></div>' }
        function ft(t) { if (!t) return ''; var m = t.match(/(\d+):(\d+)/); return m ? m[1] + ':' + m[2] + ' GMT' : t }
        function go(id) { var m = st.m.find(function (x) { return x.id === id }); if (!m) return; Telegram.WebApp.HapticFeedback.impactOccurred('medium'); sh(function () { sessionStorage.setItem('selectedMatch', JSON.stringify(m)); window.location.href = 'select-server.html' }) }
        function sh(cb) { var fn = window['show_' + CFG.Z]; if (typeof fn === 'function') { fn({ type: 'preload' }).then(function () { return fn() }).catch(function () { }).then(cb).catch(cb) } else { cb() } }
        function lt() { var s = localStorage.getItem(CFG.TK); if (s) document.documentElement.setAttribute('data-theme', s) }
        function th() { var d = document.documentElement; var n = d.getAttribute('data-theme') === 'dark' ? 'light' : 'dark'; d.setAttribute('data-theme', n); localStorage.setItem(CFG.TK, n); Telegram.WebApp.HapticFeedback.impactOccurred('light') }
        document.addEventListener('click', function (e) { var c = e.target; if (c.classList.contains('card')) { go(parseInt(c.dataset.id)) } if (c.classList.contains('ply')) { go(parseInt(c.dataset.id)) } });
    </script>
</body>

</html>